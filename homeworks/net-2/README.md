1. На лекции мы обсудили, что манипулировать размером окна необходимо для эффективного наполнения приемного буфера участников TCP сессии (Flow Control). Подобная проблема в полной мере возникает в сетях с высоким RTT. Например, если вы захотите передать 500 Гб бэкап из региона Юга-Восточной Азии на Восточное побережье США. [Здесь](https://www.cloudping.co/grid) вы можете увидеть и 200 и 400 мс вполне реального RTT. Подсчитайте, какого размера нужно окно TCP чтобы наполнить 1 Гбит/с канал при 300 мс RTT (берем простую ситуацию без потери пакетов). Можно воспользоваться готовым [калькулятором](https://www.switch.ch/network/tools/tcp_throughput/). Ознакомиться с [формулами](https://en.wikipedia.org/wiki/TCP_tuning), по которым работает калькулятор можно, например, на Wiki.

Чтобы наполнить 1 Гбит/с канал при 300 мс RTT нужен TCP Buffer в размере 36621.1 KByte.

Считал через калькулятор!

2. Во сколько раз упадет пропускная способность канала, если будет 1% потерь пакетов при передаче?
   
  Примерно в 1000

3. Какая максимальная реальная скорость передачи данных достижима при линке 100 Мбит/с? Вопрос про TCP payload, то есть цифры, которые вы реально увидите в операционной системе в тестах или в браузере при скачивании файлов. Повлияет ли размер фрейма на это?

Около 9.6 МБайт/с. Если резерв 20% отключить, то максимальная скорость с учетом TCP mss 1460 Байт и mtu 1500 будет около 12.17~ МБайт/с. При увеличении mtu реальная скорость передачи данных будет выше.

4. Что на самом деле происходит, когда вы открываете сайт? :)
На прошлой лекции был приведен сокращенный вариант ответа на этот вопрос. Теперь вы знаете намного больше, в частности про IP адресацию, DNS и т.д.
Опишите максимально подробно насколько вы это можете сделать, что происходит, когда вы делаете запрос `curl -I http://netology.ru` с вашей рабочей станции. Предположим, что arp кеш очищен, в локальном DNS нет закешированных записей.

 - Сначала идет обращение к настроенному в системе dns-серверу определения IP адресов для узла netology.ru
 - Определив IP, приложение curl создает GET запрос на этот IP. Параметр -I, вынудет отображать в ответе от сервера только HEAD
 - ОС на транспортном уровне L4 создает TCP сегменты для этого запроса, указывая в их заголовках source PORT (0 - 65535) и destination PORT (TCP 80)
 - ОС на сетевом уровне L3 добавляет IP заголовки к TCP сегментам: source IP (свой физический ip в системе, настроенный на сетевой карте) и destination IP, который уже резовлен
 - ОС, определив, что DST IP не принадлежит локальной сети, заданной на сетевой карте, формирует в broadcast ARP запрос для всех узлов локальной сети с просьбой ответить какой MAC адрес у IP шлюза по умолчанию, заданного на сетевой карте.
 - Шлюз по умолчанию или роутер, получив ARP запрос, сообщает свой MAC хосту
 - ОС, зная MAC адрес шлюза по умолчанию, помещает его в свою локальную ARP таблицу и на уровне L2 добавляет Ethernet заголовки и трейлер к IP пакетам из пункта 4 (где мы на сетевом уровне L3 добавляли IP заголовки), при этом в качестве source указывается свой MAC на сетевой карте, а destination указывается как MAC шлюза по умолчанию.
 - L2 фрейм переходит на щлюз по умолчанию, а о маршрутизирует L3-пакет, отбросив L2 заголовки и трейлеры, по своей таблице маршрутизации на нужный интерфейс.
 - Как только ответный пакет придет от сервера netology.ru на роутер, роутер его перенаправит в сторону нашего хоста, т.к. в DST этого ответного пакета будет IP нашего хоста, с которого изначально создавался запрос, добавляя L2 Ethernet заголовки source MAC свой MAC и DST MAC нашего хоста
 - ОС получает L2 фрейм, откидывая заголовки до уровня L7
 - И curl выводит HEAD 

5. Сколько и каких итеративных запросов будет сделано при резолве домена `www.google.co.uk`?
   
  4 итеративных DNS запроса:
   - Запрос к одному из 13-ти корневых DNS для зоны `uk.`.
   - Запрос к одному из 13ти корневых DNS для зоны `co.uk.`.
   - Затем аналогично запрос к `google.co.uk.`. Тут получаем 4 DNS сервера google: ns1.google.com, ns2.google.com, ns3.google.com, ns4.google.com.
   - Итоговый A-запрос к одному из полученных в предыдущем пункте DNS за резолвом для домена `www.google.co.uk.`. И получили 173.194.220.94  

6. Сколько доступно для назначения хостам адресов в подсети `/25`? А в подсети с маской `255.248.0.0`. Постарайтесь потренироваться в ручных вычислениях чтобы немного набить руку, не пользоваться калькулятором сразу.
   
   Для маски /25 это 128-2=126 адресов

   Для маски 255.248.0.0 - 524286 адресов

7. В какой подсети больше адресов, в `/23` или `/24`?
   
   В /23

8. Получится ли разделить диапазон `10.0.0.0/8` на 128 подсетей по 131070 адресов в каждой? Какая маска будет у таких подсетей?
   
  Получится, маска /15

